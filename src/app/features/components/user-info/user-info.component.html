<div class="container-fluid wrap-session">

    <div class="row no-gutters">
        <div *ngIf="alertError" class="alert alert-danger" style="position: absolute;" role="alert">
            {{erroralertTxt}}
        </div>

        <div *ngIf="alertSuccess" class="alert alert-success" style="position: absolute;" role="alert">
            Your information has been updated successfully.
        </div>

        <i class="fa-solid fa-arrow-left icon-back" (click)="goToInit()"></i>
        <div class="wrap-login col-8 offset-2">
            <form [formGroup]="signupForm" (ngSubmit)="onUpdateUser()">
                <div class="mb-3">
                    <label for="signupFirstName" class="form-label text-login">First Name</label>
                    <input id="signupFirstName" class="form-control" formControlName="firstName">
                    <div *ngIf="signupForm.get('firstName')?.invalid && signupForm.get('firstName')?.touched"
                        class="text-danger">
                        <small *ngIf="signupForm.get('firstName')?.errors?.['required']">First Name is required.</small>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="signupLastName" class="form-label text-login">Last Name</label>
                    <input id="signupLastName" class="form-control" formControlName="lastName">
                    <div *ngIf="signupForm.get('lastName')?.invalid && signupForm.get('lastName')?.touched"
                        class="text-danger">
                        <small *ngIf="signupForm.get('lastName')?.errors?.['required']">Last Name is required.</small>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="signupAddress" class="form-label text-login">Address</label>
                    <input id="signupAddress" class="form-control" formControlName="address">
                    <div *ngIf="signupForm.get('address')?.invalid && signupForm.get('address')?.touched"
                        class="text-danger">
                        <small *ngIf="signupForm.get('address')?.errors?.['required']">Address is required.</small>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="signupCity" class="form-label text-login">City</label>
                    <input id="signupCity" class="form-control" formControlName="city">
                    <div *ngIf="signupForm.get('city')?.invalid && signupForm.get('city')?.touched" class="text-danger">
                        <small *ngIf="signupForm.get('city')?.errors?.['required']">City is required.</small>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="signupPostalCode" class="form-label text-login">Postal Code</label>
                    <input id="signupPostalCode" class="form-control" formControlName="postalCode">
                    <div *ngIf="signupForm.get('postalCode')?.invalid && signupForm.get('postalCode')?.touched"
                        class="text-danger">
                        <small *ngIf="signupForm.get('postalCode')?.errors?.['required']">Postal Code is
                            required.</small>
                        <small *ngIf="signupForm.get('postalCode')?.errors?.['pattern']">Postal Code must match the
                            pattern
                            'MXR1363'.</small>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="signupPhonePrefix" class="form-label text-login">Phone Number</label>
                    <div class="input-group">
                        <div class="input-group-prepend" style="width: 30%;">
                            <select class="form-select" id="signupPhonePrefix" formControlName="phonePrefix">
                                <option *ngFor="let code of countryCodes" [value]="code.code">{{ code.name }} ({{
                                    code.code
                                    }})</option>
                            </select>
                        </div>
                        <input id="signupPhoneNumber" class="form-control" style="width: 70%;"
                            formControlName="phoneNumber">
                    </div>
                    <div *ngIf="signupForm.get('phoneNumber')?.invalid && signupForm.get('phoneNumber')?.touched"
                        class="text-danger mt-2">
                        <small *ngIf="signupForm.get('phoneNumber')?.errors?.['required']">Phone Number is
                            required.</small>
                        <small *ngIf="signupForm.get('phoneNumber')?.errors?.['pattern']">Phone Number must be
                            numeric.</small>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="signupEmail" class="form-label text-login">Email</label>
                    <input id="signupEmail" class="form-control" formControlName="email">
                    <div *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched"
                        class="text-danger">
                        <small *ngIf="signupForm.get('email')?.errors?.['required']">Email is required.</small>
                        <small *ngIf="signupForm.get('email')?.errors?.['email']">Invalid email format.</small>
                    </div>
                </div>
                <div class="row">
                    <div class="col-4">
                        <button type="submit" class="btn btn-success btn-login" [disabled]="signupForm.invalid"
                            [ngClass]="{'inactive-class': signupForm.invalid}">Update</button>
                        <div *ngIf="loading" class="spinner-border text-success wrap-spinner" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>